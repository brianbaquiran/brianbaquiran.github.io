<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Random thoughts and stories">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Lateral Thunking | Lateral Thunking</title>
<link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="assets/css/code.css" rel="stylesheet" type="text/css">
<link href="assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="http://brianbaquiran.com/">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]--><link rel="prefetch" href="posts/hiring-junior-and-full-stack-web-developers/" type="text/html">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top" role="navigation"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://brianbaquiran.com/">

                <span id="blog-title">Lateral Thunking</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>
                </li>
<li>
<a href="rss.xml">RSS feed</a>
                </li>
<li>
<a href="https://github.com/brianbaquiran">Github</a>
                </li>
<li>
<a href="https://ph.linkedin.com/in/bbaquiran">Linkedin</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

<div class="postindex">
    <article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/hiring-junior-and-full-stack-web-developers/" class="u-url">Hiring Junior and Senior Full-Stack Web Developers</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Brian Baquiran</span></p>
            <p class="dateline"><a href="posts/hiring-junior-and-full-stack-web-developers/" rel="bookmark"><time class="published dt-published" datetime="2016-10-10T16:06:20+08:00" title="2016-10-10 16:06">2016-10-10 16:06</time></a></p>
                <p class="commentline">
        
    <a href="posts/hiring-junior-and-full-stack-web-developers/#disqus_thread" data-disqus-identifier="cache/posts/hiring-junior-and-senior-full-stack-web-developers.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<div class="section" id="job-description">
<h2>Job Description</h2>
<p>We are looking for experienced full-stack web developers who want to make the country better. Our companies are committed to bringing growth opportunities to farming and provincial communities around the country.</p>
<ul class="simple">
<li>Hotjobs provides job seekers outside Metro Manila with opportunities with
employers in their area.</li>
<li>Agrigrocer enables individual farmers, co-ops, and farming communities to bring
their products direct to consumers rather than through multiple middle-men.
Consumers benefit from lower prices, and farmers have higher profit margins.</li>
</ul>
</div>
<div class="section" id="role-and-responsibilities">
<h2>Role and Responsibilities</h2>
<ul class="simple">
<li>Work with customers and other team members to prototype, implement and deploy
the web applications and platforms</li>
<li>Design of overall architecture of the web applications</li>
<li>Implementing a robust set of services and APIs</li>
<li>Translation of UI/UX elements into HTML, CSS, Javascript</li>
<li>Integration of front-end and back-end components</li>
<li>Conform to established processes such as source control, issue tracking, unit
testing, QA and documentation</li>
</ul>
</div>
<div class="section" id="qualifications">
<h2>Qualifications</h2>
<ul class="simple">
<li>Experience in full-stack web application development using:<ul>
<li>Angular.js, React.js or other Javascript framework for front-end interaction</li>
<li>REST API using Python (Django or Flask) or PHP (Laravel)</li>
</ul>
</li>
<li>Experience with SQL (PostgreSQL, MySQL) and NoSQL (Redis, MongoDB) datastores</li>
<li>Familiar with integrating with Facebook, Twitter REST APIs</li>
<li>Familiarity with Linux as software development and deployment environment</li>
<li>Familiar with version control using Git and remote repository (GitHub, GitLab,
Bitbucket etc.)</li>
<li>Familiarity with static site generators e.g. Jekyll, Hugo a HUGE plus</li>
<li>Preferably with experience deploying services on AWS, Google Cloud or Heroku</li>
</ul>
<p>Send your CV to <a class="reference external" href="mailto:genevieve.b@88db.com.ph">genevieve.b@88db.com.ph</a></p>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/creating-ec2-keypairs-with-aws-cli/" class="u-url">Creating EC2 keypairs with AWS CLI</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Brian Baquiran</span></p>
            <p class="dateline"><a href="posts/creating-ec2-keypairs-with-aws-cli/" rel="bookmark"><time class="published dt-published" datetime="2016-09-29T18:48:37+08:00" title="2016-09-29 18:48">2016-09-29 18:48</time></a></p>
                <p class="commentline">
        
    <a href="posts/creating-ec2-keypairs-with-aws-cli/#disqus_thread" data-disqus-identifier="cache/posts/creating-ec2-keypairs-with-aws-cli.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p>It is easy to create EC2 keypairs with the AWS CLI:</p>
<pre class="code shell"><a name="rest_code_1d93267ebde04361ada59505d46bfe22-1"></a>$ aws ec2 create-key-pair --key-name mynewkeypair &gt; keystuff.json
</pre>
<p>After creating the keypair it should appear in your EC2 key pairs listing. The
<tt class="docutils literal">keystuff.json</tt> file will contain the RSA private key you will need to use
to connect to any instances you create with the keypair, as well as the name of
the key and its fingerprint.</p>
<pre class="code text"><a name="rest_code_aa7447f449a2421db6a111579dda9222-1"></a>{
<a name="rest_code_aa7447f449a2421db6a111579dda9222-2"></a>    "KeyMaterial": "-----BEGIN RSA PRIVATE KEY-----\n&lt;your private key&gt;==\n-----END RSA PRIVATE KEY-----",
<a name="rest_code_aa7447f449a2421db6a111579dda9222-3"></a>    "KeyName": "mynewkeypair",
<a name="rest_code_aa7447f449a2421db6a111579dda9222-4"></a>    "KeyFingerprint": "53:47:ee:01:3a:35:9b:52:1c:4f:99:6f:87:b0:0f:8b:ed:83:55:3b"
<a name="rest_code_aa7447f449a2421db6a111579dda9222-5"></a>}
</pre>
<p>To extract the private key into a separate file, use the
<a class="reference external" href="https://stedolan.github.io/jq/">jq JSON filter</a>.</p>
<pre class="code shell"><a name="rest_code_4c346c17a4aa4c4ca9da5d2c78c57cb9-1"></a>$ jq <span class="s1">'.KeyMaterial'</span> keystuff.json --raw &gt; mynewkey.pem
</pre>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/gitlab-weirdness/" class="u-url">GitLab Weirdness</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Brian Baquiran</span></p>
            <p class="dateline"><a href="posts/gitlab-weirdness/" rel="bookmark"><time class="published dt-published" datetime="2016-09-28T15:35:40+08:00" title="2016-09-28 15:35">2016-09-28 15:35</time></a></p>
                <p class="commentline">
        
    <a href="posts/gitlab-weirdness/#disqus_thread" data-disqus-identifier="cache/posts/gitlab-weirdness.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p>If you're using GitLab.com for hosting your repositories, you may have encountered
a strange problem wherein your newly-created repository's dashboard doesn't update.</p>
<a class="reference external image-reference" href="images/gitlab-weirdness.png"><img alt="/images/gitlab-weirdness.thumbnail.png" src="images/gitlab-weirdness.thumbnail.png"></a>
<p>That is, when you <cite>git push</cite> your changes to the repository, the interface still
looks like a newly-created repository, and neither your files nor your commits
are visible in the web UI. This is weird because the remote repository works in
all other respects. You can push code up to it, clone it, etc. You just can't see
it on the GitLab website.</p>
<p>I've seen this happen a couple of times, and so far I've found that the quick fix is to
run Housekeeping on the repository from the Edit Project page.</p>
<a class="reference external image-reference" href="images/gitlab-housekeeping.png"><img alt="/images/gitlab-housekeeping.thumbnail.png" src="images/gitlab-housekeeping.thumbnail.png"></a>
<p>Housekeeping can take a couple of minutes but most of the time it works and you
can see your repository's files and commit history after running it. If it
doesn't work, you have to delete the repository in GitLab and re-create it,
pushing your code up again.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/installing-python-2711-on-centos-7/" class="u-url">Installing Python 2.7.11 on CentOS 7</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Brian Baquiran</span></p>
            <p class="dateline"><a href="posts/installing-python-2711-on-centos-7/" rel="bookmark"><time class="published dt-published" datetime="2016-05-23T19:17:07+08:00" title="2016-05-23 19:17">2016-05-23 19:17</time></a></p>
                <p class="commentline">
        
    <a href="posts/installing-python-2711-on-centos-7/#disqus_thread" data-disqus-identifier="cache/posts/installing-python-2711-on-centos-7.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p>CentOS 7 ships with python 2.7.5 by default. We have some software that requires 2.7.11. It's generally a bad idea to clobber your system python, since other system-supplied software may rely on it being a particular version.</p>
<p>Our strategy for running 2.7.11 alongside the system python is to build it from source, then create virtualenvs that will run our software.</p>
<!-- TEASER_END -->
<div class="section" id="step-1-update-centos-and-install-development-tools">
<h2>Step 1. Update CentOS and install development tools</h2>
<pre class="code bash"><a name="rest_code_fe1f9c8bcd064dc7837ca0bbae743c75-1"></a><span class="c1"># as root</span>
<a name="rest_code_fe1f9c8bcd064dc7837ca0bbae743c75-2"></a>yum upgrade -y
<a name="rest_code_fe1f9c8bcd064dc7837ca0bbae743c75-3"></a>yum groupinstall <span class="s1">'Development Tools'</span> -y
<a name="rest_code_fe1f9c8bcd064dc7837ca0bbae743c75-4"></a>yum install zlib-devel openssl-devel
</pre>
</div>
<div class="section" id="step-2-download-the-python-source-tarball">
<h2>Step 2. Download the Python source tarball</h2>
<pre class="code bash"><a name="rest_code_6d4a51d1f8ee450facfd72d921c92b69-1"></a><span class="c1"># As a regular user (avoid doing mundane things as root)</span>
<a name="rest_code_6d4a51d1f8ee450facfd72d921c92b69-2"></a>$ <span class="nb">cd</span> /tmp
<a name="rest_code_6d4a51d1f8ee450facfd72d921c92b69-3"></a>$ wget https://www.python.org/ftp/python/2.7.11/Python-2.7.11.tgz
<a name="rest_code_6d4a51d1f8ee450facfd72d921c92b69-4"></a>$ tar -zxf Python-2.7.11.tgz
<a name="rest_code_6d4a51d1f8ee450facfd72d921c92b69-5"></a>$ <span class="nb">cd</span> Python-2.7.11
</pre>
</div>
<div class="section" id="step-3-configure-build-and-install-into-opt-replace-with-usr-local-if-you-prefer">
<h2>Step 3. Configure, build and install into <tt class="docutils literal">/opt</tt> (replace with <tt class="docutils literal">/usr/local/</tt> if you prefer)</h2>
<pre class="code bash"><a name="rest_code_88dc81ad16df4970be198d3ad6f40f88-1"></a>$ ./configure --prefix<span class="o">=</span>/opt/
<a name="rest_code_88dc81ad16df4970be198d3ad6f40f88-2"></a>$ make
<a name="rest_code_88dc81ad16df4970be198d3ad6f40f88-3"></a>$ make install
</pre>
</div>
<div class="section" id="step-4-install-pip-and-virtualenv-for-the-system-python">
<h2>Step 4. Install pip and virtualenv for the system Python</h2>
<p>You have to be root for this.</p>
<pre class="code bash"><a name="rest_code_8c81e17242834da8be4ead3033aa4891-1"></a><span class="c1"># curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py</span>
<a name="rest_code_8c81e17242834da8be4ead3033aa4891-2"></a><span class="c1"># python get-pip.py</span>
<a name="rest_code_8c81e17242834da8be4ead3033aa4891-3"></a><span class="c1"># pip install virtualenv</span>
</pre>
</div>
<div class="section" id="step-5-use-the-system-virtualenv-to-create-a-venv-for-your-updated-python">
<h2>Step 5. Use the system virtualenv to create a venv for your updated Python</h2>
<p>You can now create virtualenvs, just point --python to the 2.7.11 interpreter</p>
<pre class="code bash"><a name="rest_code_81f65f55c12b4d2f987103b26f1d73d8-1"></a>$ mkdir env
<a name="rest_code_81f65f55c12b4d2f987103b26f1d73d8-2"></a>$ virtualenv --python<span class="o">=</span>/opt/bin/python2.7 env/pyenv
<a name="rest_code_81f65f55c12b4d2f987103b26f1d73d8-3"></a>$ <span class="nb">source</span> env/pyenv/bin/activate
<a name="rest_code_81f65f55c12b4d2f987103b26f1d73d8-4"></a>$ python --version
<a name="rest_code_81f65f55c12b4d2f987103b26f1d73d8-5"></a>Python 2.7.11
</pre>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/the-business-of-big-data-analytics-meetup-3/" class="u-url">The Business of Big Data Analytics Meetup #3</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Brian Baquiran</span></p>
            <p class="dateline"><a href="posts/the-business-of-big-data-analytics-meetup-3/" rel="bookmark"><time class="published dt-published" datetime="2016-02-11T10:14:39+08:00" title="2016-02-11 10:14">2016-02-11 10:14</time></a></p>
                <p class="commentline">
        
    <a href="posts/the-business-of-big-data-analytics-meetup-3/#disqus_thread" data-disqus-identifier="cache/posts/the-business-of-big-data-analytics-meetup-3.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <a class="reference external image-reference" href="images/meetup_business_of_big_data_analytics.jpg"><img alt="/images/meetup_business_of_big_data_analytics.thumbnail.jpg" src="images/meetup_business_of_big_data_analytics.thumbnail.jpg"></a>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/namedtuple-comes-in-handy/" class="u-url">namedtuple Comes in Handy</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Brian Baquiran</span></p>
            <p class="dateline"><a href="posts/namedtuple-comes-in-handy/" rel="bookmark"><time class="published dt-published" datetime="2015-12-20T08:58:42+08:00" title="2015-12-20 08:58">2015-12-20 08:58</time></a></p>
                <p class="commentline">
        
    <a href="posts/namedtuple-comes-in-handy/#disqus_thread" data-disqus-identifier="cache/posts/namedtuple-comes-in-handy.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p>I've been writing a lot of Python code recently. Oftentimes I struggle with what a method should return when I have to relay more than one value back to the caller. For example:</p>
<pre class="code python"><a name="rest_code_7042d492ba27402da150373023c34766-1"></a><span class="k">def</span> <span class="nf">PaymentGateway</span><span class="p">:</span>
<a name="rest_code_7042d492ba27402da150373023c34766-2"></a>    <span class="k">def</span> <span class="nf">do_transaction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">amount</span><span class="p">,</span> <span class="n">bill_code</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a name="rest_code_7042d492ba27402da150373023c34766-3"></a>        <span class="sd">"""</span>
<a name="rest_code_7042d492ba27402da150373023c34766-4"></a><span class="sd">        Perform some transaction against the API.</span>
<a name="rest_code_7042d492ba27402da150373023c34766-5"></a>
<a name="rest_code_7042d492ba27402da150373023c34766-6"></a><span class="sd">        :return: whether the transaction was successful or not</span>
<a name="rest_code_7042d492ba27402da150373023c34766-7"></a><span class="sd">        :rtype: bool</span>
<a name="rest_code_7042d492ba27402da150373023c34766-8"></a><span class="sd">        """</span>
<a name="rest_code_7042d492ba27402da150373023c34766-9"></a>        <span class="c1"># stuff happens here</span>
<a name="rest_code_7042d492ba27402da150373023c34766-10"></a>        <span class="k">try</span><span class="p">:</span>
<a name="rest_code_7042d492ba27402da150373023c34766-11"></a>            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount_transaction</span><span class="p">(</span><span class="n">tx_details</span><span class="p">)</span>
<a name="rest_code_7042d492ba27402da150373023c34766-12"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">"Success: CODE=</span><span class="si">%s</span><span class="s2"> Details=</span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">detail</span><span class="p">))</span>
<a name="rest_code_7042d492ba27402da150373023c34766-13"></a>            <span class="k">return</span> <span class="bp">True</span>
<a name="rest_code_7042d492ba27402da150373023c34766-14"></a>        <span class="k">except</span> <span class="n">GatewayException</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
<a name="rest_code_7042d492ba27402da150373023c34766-15"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">"Transaction failed: ERROR=</span><span class="si">%s</span><span class="s2"> reason=</span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">ex</span><span class="o">.</span><span class="n">err_code</span><span class="p">,</span> <span class="n">ex</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
<a name="rest_code_7042d492ba27402da150373023c34766-16"></a>            <span class="k">return</span> <span class="bp">False</span>
</pre>
<p>The code that calls <code>do_transaction</code> might look like this:</p>
<pre class="code python"><a name="rest_code_fb092e3205b5424984db5373562afc89-1"></a><span class="k">if</span> <span class="n">payment_gw</span><span class="o">.</span><span class="n">do_transaction</span><span class="p">(</span><span class="n">subid</span><span class="p">,</span> <span class="n">amount</span><span class="p">,</span> <span class="n">bill_code</span><span class="p">,</span> <span class="n">service_id</span><span class="p">,</span> <span class="n">ref_code</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
<a name="rest_code_fb092e3205b5424984db5373562afc89-2"></a>    <span class="c1"># Hooray! Succe$$!</span>
<a name="rest_code_fb092e3205b5424984db5373562afc89-3"></a>    <span class="n">report_success</span><span class="p">(</span><span class="s2">"Transaction for </span><span class="si">%s</span><span class="s2"> was successful. Check logs for status code."</span> <span class="o">%</span> <span class="n">subid</span><span class="p">)</span>
<a name="rest_code_fb092e3205b5424984db5373562afc89-4"></a><span class="k">else</span><span class="p">:</span>
<a name="rest_code_fb092e3205b5424984db5373562afc89-5"></a>    <span class="c1"># Boo</span>
<a name="rest_code_fb092e3205b5424984db5373562afc89-6"></a>    <span class="n">report_failure</span><span class="p">(</span><span class="s2">"Transaction failed. I don't know why..."</span><span class="p">)</span>
</pre>
<p>Many times this is fine, but what if the caller needs the details from the <code>amount_transaction</code> result or the <code>GatewayException</code>? A quick solution is to return a <code>dict</code> :</p>
<pre class="code python"><a name="rest_code_63d053d591e5415c97a4148f3600fae8-1"></a><span class="k">def</span> <span class="nf">PaymentGateway</span><span class="p">:</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-2"></a>    <span class="k">def</span> <span class="nf">do_transaction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">amount</span><span class="p">,</span> <span class="n">bill_code</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-3"></a>        <span class="sd">"""</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-4"></a><span class="sd">        Perform some transaction against the API.</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-5"></a>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-6"></a><span class="sd">        :return: a dict that contains keys 'success', 'code', and 'detail'</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-7"></a><span class="sd">        :rtype: dict</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-8"></a><span class="sd">        """</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-9"></a>        <span class="c1"># stuff happens here</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-10"></a>        <span class="k">try</span><span class="p">:</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-11"></a>            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount_transaction</span><span class="p">(</span><span class="n">tx_details</span><span class="p">)</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-12"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">"Success: CODE=</span><span class="si">%s</span><span class="s2"> Details=</span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">detail</span><span class="p">))</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-13"></a>            <span class="n">success_dict</span> <span class="o">=</span> <span class="p">{</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-14"></a>                <span class="s1">'success'</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-15"></a>                <span class="s1">'code'</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-16"></a>                <span class="s1">'detail'</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">detail</span><span class="p">,</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-17"></a>            <span class="p">}</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-18"></a>            <span class="k">return</span> <span class="n">success_dict</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-19"></a>        <span class="k">except</span> <span class="n">GatewayException</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-20"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">"Transaction failed: ERROR=</span><span class="si">%s</span><span class="s2"> reason=</span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">ex</span><span class="o">.</span><span class="n">err_code</span><span class="p">,</span> <span class="n">ex</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-21"></a>            <span class="n">error_dict</span> <span class="o">=</span> <span class="p">{</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-22"></a>                <span class="s1">'success'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-23"></a>                <span class="s1">'code'</span><span class="p">:</span> <span class="n">ex</span><span class="o">.</span><span class="n">err_code</span><span class="p">,</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-24"></a>                <span class="s1">'detail'</span><span class="p">:</span> <span class="n">ex</span><span class="o">.</span><span class="n">message</span><span class="p">,</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-25"></a>            <span class="p">}</span>
<a name="rest_code_63d053d591e5415c97a4148f3600fae8-26"></a>            <span class="k">return</span> <span class="n">error_dict</span>
</pre>
<p>It works but it's pretty ad-hoc. The structure of whatever <code>do_transaction</code> returns won't be obvious unless you dig into the code. The caller will end up like:</p>
<pre class="code python"><a name="rest_code_ce26872ca21c45c3b86be80c36e8da74-1"></a><span class="n">payment_status</span> <span class="o">=</span> <span class="n">payment_gw</span><span class="o">.</span><span class="n">do_transaction</span><span class="p">(</span><span class="n">subid</span><span class="p">,</span> <span class="n">amount</span><span class="p">,</span> <span class="n">bill_code</span><span class="p">,</span> <span class="n">service_id</span><span class="p">,</span> <span class="n">ref_code</span><span class="p">)</span>
<a name="rest_code_ce26872ca21c45c3b86be80c36e8da74-2"></a><span class="k">if</span> <span class="n">payment_status</span><span class="p">[</span><span class="s1">'success'</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
<a name="rest_code_ce26872ca21c45c3b86be80c36e8da74-3"></a>    <span class="c1"># Hooray! Succe$$!</span>
<a name="rest_code_ce26872ca21c45c3b86be80c36e8da74-4"></a>    <span class="n">report_success</span><span class="p">(</span><span class="s2">"Transaction for </span><span class="si">%s</span><span class="s2"> was successful, status code </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">subid</span><span class="p">,</span> <span class="n">payment_status</span><span class="p">[</span><span class="s1">'code'</span><span class="p">]))</span>
<a name="rest_code_ce26872ca21c45c3b86be80c36e8da74-5"></a><span class="k">else</span><span class="p">:</span>
<a name="rest_code_ce26872ca21c45c3b86be80c36e8da74-6"></a>    <span class="c1"># Boo</span>
<a name="rest_code_ce26872ca21c45c3b86be80c36e8da74-7"></a>    <span class="n">report_failure</span><span class="p">(</span><span class="s2">"Transaction failed, because: </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="n">payment_status</span><span class="p">[</span><span class="s1">'detail'</span><span class="p">])</span>
</pre>
<p>Now the caller is poluted with literal strings like <code>'success'</code>, <code>'code'</code> and <code>'status'</code>. These can be hell to debug, specially if you happen to misspell one of them in your code. Even if you're using an awesome IDE like <a class="reference external" href="http://www.jetbrains.com/pycharm/">PyCharm</a>.</p>
<p>An altenative to defining these ad-hoc dict structures is to use <a class="reference external" href="https://docs.python.org/2/library/collections.html#collections.namedtuple">namedtuple</a> from the collections package.</p>
<pre class="code python"><a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-1"></a><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>
<a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-2"></a>
<a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-3"></a><span class="n">PaymentStatus</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">'PaymentStatus'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'success'</span><span class="p">,</span> <span class="s1">'code'</span><span class="p">,</span> <span class="s1">'detail'</span><span class="p">])</span>
<a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-4"></a>
<a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-5"></a><span class="k">def</span> <span class="nf">PaymentGateway</span><span class="p">:</span>
<a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-6"></a>    <span class="k">def</span> <span class="nf">do_transaction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">amount</span><span class="p">,</span> <span class="n">bill_code</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-7"></a>        <span class="sd">"""</span>
<a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-8"></a><span class="sd">        Perform some transaction against the API.</span>
<a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-9"></a>
<a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-10"></a><span class="sd">        :return: whether the transaction was successful or not</span>
<a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-11"></a><span class="sd">        :rtype: PaymentStatus</span>
<a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-12"></a><span class="sd">        """</span>
<a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-13"></a>        <span class="c1"># stuff happens here</span>
<a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-14"></a>        <span class="k">try</span><span class="p">:</span>
<a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-15"></a>            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount_transaction</span><span class="p">(</span><span class="n">tx_details</span><span class="p">)</span>
<a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-16"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">"Success: CODE=</span><span class="si">%s</span><span class="s2"> Details=</span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">detail</span><span class="p">))</span>
<a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-17"></a>            <span class="k">return</span> <span class="n">PaymentStatus</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">detail</span><span class="p">)</span>
<a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-18"></a>        <span class="k">except</span> <span class="n">GatewayException</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
<a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-19"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">"Transaction failed: ERROR=</span><span class="si">%s</span><span class="s2"> reason=</span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">ex</span><span class="o">.</span><span class="n">err_code</span><span class="p">,</span> <span class="n">ex</span><span class="o">.</span><span class="n">message</span><span class="p">))</span>
<a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-20"></a>            <span class="k">return</span> <span class="n">PaymentStatus</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">ex</span><span class="o">.</span><span class="n">err_code</span><span class="p">,</span> <span class="n">ex</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
</pre>
<p><code>namedtuple</code> forces us to be explicit about what <code>do_transaction</code> returns. And <a class="reference external" href="http://www.thezenofpython.com/">explicit is better than implicit</a>. For the caller, this looks like:</p>
<pre class="code python"><a name="rest_code_8f16b3b683814e4ea01d7265a6d0e14a-1"></a><span class="n">payment_status</span> <span class="o">=</span> <span class="n">payment_gw</span><span class="o">.</span><span class="n">do_transaction</span><span class="p">(</span><span class="n">subid</span><span class="p">,</span> <span class="n">amount</span><span class="p">,</span> <span class="n">bill_code</span><span class="p">,</span> <span class="n">service_id</span><span class="p">,</span> <span class="n">ref_code</span><span class="p">)</span>
<a name="rest_code_8f16b3b683814e4ea01d7265a6d0e14a-2"></a><span class="k">if</span> <span class="n">payment_status</span><span class="o">.</span><span class="n">success</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
<a name="rest_code_8f16b3b683814e4ea01d7265a6d0e14a-3"></a>    <span class="c1"># Hooray! Succe$$!</span>
<a name="rest_code_8f16b3b683814e4ea01d7265a6d0e14a-4"></a>    <span class="n">report_success</span><span class="p">(</span><span class="s2">"Transaction for </span><span class="si">%s</span><span class="s2"> was successful, status code </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">subid</span><span class="p">,</span> <span class="n">payment_status</span><span class="o">.</span><span class="n">code</span><span class="p">))</span>
<a name="rest_code_8f16b3b683814e4ea01d7265a6d0e14a-5"></a><span class="k">else</span><span class="p">:</span>
<a name="rest_code_8f16b3b683814e4ea01d7265a6d0e14a-6"></a>    <span class="c1"># Boo</span>
<a name="rest_code_8f16b3b683814e4ea01d7265a6d0e14a-7"></a>    <span class="n">report_failure</span><span class="p">(</span><span class="s2">"Transaction failed, because: </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="n">payment_status</span><span class="o">.</span><span class="n">detail</span><span class="p">)</span>
</pre>
<p>This is almost as simple as our first example, and is free of string literals. And if you're using PyCharm, you can take advantage of the code completion which will know about the attributes of your new <code>namedtuple</code> class:</p>
<img alt="/images/pycharm_namedtuple.png" src="images/pycharm_namedtuple.png"><p>So if your code is littered with string literals as keys for return values from methods that return <code>dict</code>, consider having them return a <code>namedtuple</code> instead.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/alien-employment-permit-dataset/" class="u-url">Tidy Aliens</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Brian Baquiran</span></p>
            <p class="dateline"><a href="posts/alien-employment-permit-dataset/" rel="bookmark"><time class="published dt-published" datetime="2015-11-29T09:40:54+08:00" title="2015-11-29 09:40">2015-11-29 09:40</time></a></p>
                <p class="commentline">
        
    <a href="posts/alien-employment-permit-dataset/#disqus_thread" data-disqus-identifier="cache/posts/alien-employment-permit-dataset.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<a class="reference external image-reference" href="images/aliens.png"><img alt="/images/aliens.thumbnail.png" src="images/aliens.thumbnail.png"></a>
<p>The <a class="reference external" href="http://www.ble.dole.gov.ph/">Bureau of Local Employment</a> issues working permits to foreign nationals that want to work in the Philippines. Ever wondered which nationalities obtain the most permits? I used public data from the BLE in a <a class="reference external" href="stories/tidying-alien-work-permit-dataset/">data cleanup and visualization exercise</a> using R’s reshape, dplyr and ggplot2.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/the-art-of-data-science/" class="u-url">The Art of Data Science</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Brian Baquiran</span></p>
            <p class="dateline"><a href="posts/the-art-of-data-science/" rel="bookmark"><time class="published dt-published" datetime="2015-11-25T20:16:28+08:00" title="2015-11-25 20:16">2015-11-25 20:16</time></a></p>
                <p class="commentline">
        
    <a href="posts/the-art-of-data-science/#disqus_thread" data-disqus-identifier="cache/posts/the-art-of-data-science.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<a class="reference external image-reference" href="images/art-of-data-science-book.png"><img alt="/images/art-of-data-science-book.thumbnail.png" src="images/art-of-data-science-book.thumbnail.png"></a>
<p>I will admit, I was pretty stoked yesterday when <a class="reference external" href="http://www.biostat.jhsph.edu/~rpeng/">Roger Peng</a> retweeted my announcement that his new book was available.</p>
<blockquote class="twitter-tweet" lang="en">
<p lang="en" dir="ltr">. <a href="https://twitter.com/rdpeng">@rdpeng</a>'s new book "The Art of Data Science" is now available on <a href="https://twitter.com/leanpub">@leanpub</a>. Get it at <a href="https://t.co/nA606G715i">https://t.co/nA606G715i</a> <a href="https://twitter.com/hashtag/datascience?src=hash">#datascience</a></p>— Brian Baquiran (@brianbaquiran) <a href="https://twitter.com/brianbaquiran/status/669022777035243520">November 24, 2015</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script><p>In the book, Peng and co-author Elizabeth Matsui walk us through the different activites of data analysis, from formulating questions, basic exploratory data analysis to get a rough feel for the data, to modelling the data with familiar distributions through to basic inference and prediction.</p>
<p>Using R and the datasets that come bundled with it, Peng and Matsui demonstrate how each activity is actually an iterative process itself. At each stage, it's important to evaluate what you already know (or think you know) and revise your expectations based on the data.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/hello-world/" class="u-url">Hello, World!</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Brian Baquiran</span></p>
            <p class="dateline"><a href="posts/hello-world/" rel="bookmark"><time class="published dt-published" datetime="2015-10-25T13:02:45+08:00" title="2015-10-25 13:02">2015-10-25 13:02</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <pre class="code c"><a name="rest_code_61d8112fcc944b588fbc1744040b1596-1"></a><span class="cm">/* Hello World program */</span>
<a name="rest_code_61d8112fcc944b588fbc1744040b1596-2"></a>
<a name="rest_code_61d8112fcc944b588fbc1744040b1596-3"></a><span class="cp">#include</span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<a name="rest_code_61d8112fcc944b588fbc1744040b1596-4"></a>
<a name="rest_code_61d8112fcc944b588fbc1744040b1596-5"></a><span class="n">main</span><span class="p">()</span>
<a name="rest_code_61d8112fcc944b588fbc1744040b1596-6"></a><span class="p">{</span>
<a name="rest_code_61d8112fcc944b588fbc1744040b1596-7"></a>    <span class="n">printf</span><span class="p">(</span><span class="s">"Hello World"</span><span class="p">);</span>
<a name="rest_code_61d8112fcc944b588fbc1744040b1596-8"></a>
<a name="rest_code_61d8112fcc944b588fbc1744040b1596-9"></a><span class="p">}</span>
</pre>
    </div>
    </article>
</div>



        
       <script>var disqus_shortname="lateralthunking";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2016
            
        </footer>
</div>
</div>


            <script src="assets/js/jquery.min.js"></script><script src="assets/js/bootstrap.min.js"></script><script src="assets/js/moment-with-locales.min.js"></script><script src="assets/js/fancydates.js"></script><script src="assets/js/jquery.colorbox-min.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-10693543-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
