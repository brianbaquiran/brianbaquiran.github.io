<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="assets/xml/rss.xsl" media="all"?><rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/"><channel><title>Lateral Thunking</title><link>http://brianbaquiran.com/</link><description>Random thoughts and stories</description><atom:link href="http://brianbaquiran.com/rss.xml" type="application/rss+xml" rel="self"></atom:link><language>en</language><lastBuildDate>Wed, 06 Apr 2016 02:02:52 GMT</lastBuildDate><generator>http://getnikola.com/</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>The Business of Big Data Analytics Meetup #3</title><link>http://brianbaquiran.com/posts/the-business-of-big-data-analytics-meetup-3/</link><dc:creator>Brian Baquiran</dc:creator><description>&lt;a class="reference external image-reference" href="http://brianbaquiran.com/images/meetup_business_of_big_data_analytics.jpg"&gt;&lt;img alt="/images/meetup_business_of_big_data_analytics.thumbnail.jpg" src="http://brianbaquiran.com/images/meetup_business_of_big_data_analytics.thumbnail.jpg"&gt;&lt;/a&gt;</description><guid>http://brianbaquiran.com/posts/the-business-of-big-data-analytics-meetup-3/</guid><pubDate>Thu, 11 Feb 2016 02:14:39 GMT</pubDate></item><item><title>namedtuple Comes in Handy</title><link>http://brianbaquiran.com/posts/namedtuple-comes-in-handy/</link><dc:creator>Brian Baquiran</dc:creator><description>&lt;div&gt;&lt;p&gt;I've been writing a lot of Python code recently. Oftentimes I struggle with what a method should return when I have to relay more than one value back to the caller. For example:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_7042d492ba27402da150373023c34766-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;PaymentGateway&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_7042d492ba27402da150373023c34766-2"&gt;&lt;/a&gt;    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;do_transaction&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bill_code&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_7042d492ba27402da150373023c34766-3"&gt;&lt;/a&gt;        &lt;span class="sd"&gt;"""&lt;/span&gt;
&lt;a name="rest_code_7042d492ba27402da150373023c34766-4"&gt;&lt;/a&gt;&lt;span class="sd"&gt;        Perform some transaction against the API.&lt;/span&gt;
&lt;a name="rest_code_7042d492ba27402da150373023c34766-5"&gt;&lt;/a&gt;
&lt;a name="rest_code_7042d492ba27402da150373023c34766-6"&gt;&lt;/a&gt;&lt;span class="sd"&gt;        :return: whether the transaction was successful or not&lt;/span&gt;
&lt;a name="rest_code_7042d492ba27402da150373023c34766-7"&gt;&lt;/a&gt;&lt;span class="sd"&gt;        :rtype: bool&lt;/span&gt;
&lt;a name="rest_code_7042d492ba27402da150373023c34766-8"&gt;&lt;/a&gt;&lt;span class="sd"&gt;        """&lt;/span&gt;
&lt;a name="rest_code_7042d492ba27402da150373023c34766-9"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# stuff happens here&lt;/span&gt;
&lt;a name="rest_code_7042d492ba27402da150373023c34766-10"&gt;&lt;/a&gt;        &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_7042d492ba27402da150373023c34766-11"&gt;&lt;/a&gt;            &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;amount_transaction&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tx_details&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_7042d492ba27402da150373023c34766-12"&gt;&lt;/a&gt;            &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"Success: CODE=&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; Details=&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;code&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;detail&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;a name="rest_code_7042d492ba27402da150373023c34766-13"&gt;&lt;/a&gt;            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;
&lt;a name="rest_code_7042d492ba27402da150373023c34766-14"&gt;&lt;/a&gt;        &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;GatewayException&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_7042d492ba27402da150373023c34766-15"&gt;&lt;/a&gt;            &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"Transaction failed: ERROR=&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; reason=&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;err_code&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;a name="rest_code_7042d492ba27402da150373023c34766-16"&gt;&lt;/a&gt;            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;The code that calls &lt;code&gt;do_transaction&lt;/code&gt; might look like this:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_fb092e3205b5424984db5373562afc89-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;payment_gw&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;do_transaction&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;subid&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bill_code&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;service_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ref_code&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_fb092e3205b5424984db5373562afc89-2"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# Hooray! Succe$$!&lt;/span&gt;
&lt;a name="rest_code_fb092e3205b5424984db5373562afc89-3"&gt;&lt;/a&gt;    &lt;span class="n"&gt;report_success&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"Transaction for &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; was successful. Check logs for status code."&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;subid&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_fb092e3205b5424984db5373562afc89-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_fb092e3205b5424984db5373562afc89-5"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# Boo&lt;/span&gt;
&lt;a name="rest_code_fb092e3205b5424984db5373562afc89-6"&gt;&lt;/a&gt;    &lt;span class="n"&gt;report_failure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"Transaction failed. I don't know why..."&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Many times this is fine, but what if the caller needs the details from the &lt;code&gt;amount_transaction&lt;/code&gt; result or the &lt;code&gt;GatewayException&lt;/code&gt;? A quick solution is to return a &lt;code&gt;dict&lt;/code&gt; :&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;PaymentGateway&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-2"&gt;&lt;/a&gt;    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;do_transaction&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bill_code&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-3"&gt;&lt;/a&gt;        &lt;span class="sd"&gt;"""&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-4"&gt;&lt;/a&gt;&lt;span class="sd"&gt;        Perform some transaction against the API.&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-5"&gt;&lt;/a&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-6"&gt;&lt;/a&gt;&lt;span class="sd"&gt;        :return: a dict that contains keys 'success', 'code', and 'detail'&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-7"&gt;&lt;/a&gt;&lt;span class="sd"&gt;        :rtype: dict&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-8"&gt;&lt;/a&gt;&lt;span class="sd"&gt;        """&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-9"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# stuff happens here&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-10"&gt;&lt;/a&gt;        &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-11"&gt;&lt;/a&gt;            &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;amount_transaction&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tx_details&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-12"&gt;&lt;/a&gt;            &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"Success: CODE=&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; Details=&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;code&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;detail&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-13"&gt;&lt;/a&gt;            &lt;span class="n"&gt;success_dict&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-14"&gt;&lt;/a&gt;                &lt;span class="s1"&gt;'success'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-15"&gt;&lt;/a&gt;                &lt;span class="s1"&gt;'code'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;code&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-16"&gt;&lt;/a&gt;                &lt;span class="s1"&gt;'detail'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;detail&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-17"&gt;&lt;/a&gt;            &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-18"&gt;&lt;/a&gt;            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;success_dict&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-19"&gt;&lt;/a&gt;        &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;GatewayException&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-20"&gt;&lt;/a&gt;            &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"Transaction failed: ERROR=&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; reason=&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;err_code&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-21"&gt;&lt;/a&gt;            &lt;span class="n"&gt;error_dict&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-22"&gt;&lt;/a&gt;                &lt;span class="s1"&gt;'success'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-23"&gt;&lt;/a&gt;                &lt;span class="s1"&gt;'code'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;err_code&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-24"&gt;&lt;/a&gt;                &lt;span class="s1"&gt;'detail'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-25"&gt;&lt;/a&gt;            &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_63d053d591e5415c97a4148f3600fae8-26"&gt;&lt;/a&gt;            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;error_dict&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;It works but it's pretty ad-hoc. The structure of whatever &lt;code&gt;do_transaction&lt;/code&gt; returns won't be obvious unless you dig into the code. The caller will end up like:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_ce26872ca21c45c3b86be80c36e8da74-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;payment_status&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;payment_gw&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;do_transaction&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;subid&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bill_code&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;service_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ref_code&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_ce26872ca21c45c3b86be80c36e8da74-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;payment_status&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'success'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_ce26872ca21c45c3b86be80c36e8da74-3"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# Hooray! Succe$$!&lt;/span&gt;
&lt;a name="rest_code_ce26872ca21c45c3b86be80c36e8da74-4"&gt;&lt;/a&gt;    &lt;span class="n"&gt;report_success&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"Transaction for &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; was successful, status code &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;subid&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;payment_status&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'code'&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
&lt;a name="rest_code_ce26872ca21c45c3b86be80c36e8da74-5"&gt;&lt;/a&gt;&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_ce26872ca21c45c3b86be80c36e8da74-6"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# Boo&lt;/span&gt;
&lt;a name="rest_code_ce26872ca21c45c3b86be80c36e8da74-7"&gt;&lt;/a&gt;    &lt;span class="n"&gt;report_failure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"Transaction failed, because: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;payment_status&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'detail'&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Now the caller is poluted with literal strings like &lt;code&gt;'success'&lt;/code&gt;, &lt;code&gt;'code'&lt;/code&gt; and &lt;code&gt;'status'&lt;/code&gt;. These can be hell to debug, specially if you happen to misspell one of them in your code. Even if you're using an awesome IDE like &lt;a class="reference external" href="http://www.jetbrains.com/pycharm/"&gt;PyCharm&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;An altenative to defining these ad-hoc dict structures is to use &lt;a class="reference external" href="https://docs.python.org/2/library/collections.html#collections.namedtuple"&gt;namedtuple&lt;/a&gt; from the collections package.&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-1"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;collections&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;namedtuple&lt;/span&gt;
&lt;a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-2"&gt;&lt;/a&gt;
&lt;a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;PaymentStatus&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;namedtuple&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'PaymentStatus'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'success'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'code'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'detail'&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-4"&gt;&lt;/a&gt;
&lt;a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-5"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;PaymentGateway&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-6"&gt;&lt;/a&gt;    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;do_transaction&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bill_code&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-7"&gt;&lt;/a&gt;        &lt;span class="sd"&gt;"""&lt;/span&gt;
&lt;a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-8"&gt;&lt;/a&gt;&lt;span class="sd"&gt;        Perform some transaction against the API.&lt;/span&gt;
&lt;a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-9"&gt;&lt;/a&gt;
&lt;a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-10"&gt;&lt;/a&gt;&lt;span class="sd"&gt;        :return: whether the transaction was successful or not&lt;/span&gt;
&lt;a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-11"&gt;&lt;/a&gt;&lt;span class="sd"&gt;        :rtype: PaymentStatus&lt;/span&gt;
&lt;a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-12"&gt;&lt;/a&gt;&lt;span class="sd"&gt;        """&lt;/span&gt;
&lt;a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-13"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# stuff happens here&lt;/span&gt;
&lt;a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-14"&gt;&lt;/a&gt;        &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-15"&gt;&lt;/a&gt;            &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;amount_transaction&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tx_details&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-16"&gt;&lt;/a&gt;            &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"Success: CODE=&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; Details=&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;code&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;detail&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-17"&gt;&lt;/a&gt;            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;PaymentStatus&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;code&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;detail&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-18"&gt;&lt;/a&gt;        &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;GatewayException&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-19"&gt;&lt;/a&gt;            &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"Transaction failed: ERROR=&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; reason=&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;err_code&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;a name="rest_code_dab994d0c3f04c6c9d648ed76e805472-20"&gt;&lt;/a&gt;            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;PaymentStatus&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;err_code&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;&lt;code&gt;namedtuple&lt;/code&gt; forces us to be explicit about what &lt;code&gt;do_transaction&lt;/code&gt; returns. And &lt;a class="reference external" href="http://www.thezenofpython.com/"&gt;explicit is better than implicit&lt;/a&gt;. For the caller, this looks like:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_8f16b3b683814e4ea01d7265a6d0e14a-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;payment_status&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;payment_gw&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;do_transaction&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;subid&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bill_code&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;service_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ref_code&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_8f16b3b683814e4ea01d7265a6d0e14a-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;payment_status&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;success&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_8f16b3b683814e4ea01d7265a6d0e14a-3"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# Hooray! Succe$$!&lt;/span&gt;
&lt;a name="rest_code_8f16b3b683814e4ea01d7265a6d0e14a-4"&gt;&lt;/a&gt;    &lt;span class="n"&gt;report_success&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"Transaction for &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; was successful, status code &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;subid&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;payment_status&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;code&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;a name="rest_code_8f16b3b683814e4ea01d7265a6d0e14a-5"&gt;&lt;/a&gt;&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_8f16b3b683814e4ea01d7265a6d0e14a-6"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# Boo&lt;/span&gt;
&lt;a name="rest_code_8f16b3b683814e4ea01d7265a6d0e14a-7"&gt;&lt;/a&gt;    &lt;span class="n"&gt;report_failure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"Transaction failed, because: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;payment_status&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;detail&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;This is almost as simple as our first example, and is free of string literals. And if you're using PyCharm, you can take advantage of the code completion which will know about the attributes of your new &lt;code&gt;namedtuple&lt;/code&gt; class:&lt;/p&gt;
&lt;img alt="/images/pycharm_namedtuple.png" src="http://brianbaquiran.com/images/pycharm_namedtuple.png"&gt;
&lt;p&gt;So if your code is littered with string literals as keys for return values from methods that return &lt;code&gt;dict&lt;/code&gt;, consider having them return a &lt;code&gt;namedtuple&lt;/code&gt; instead.&lt;/p&gt;&lt;/div&gt;</description><category>coding</category><category>namedtuple</category><category>PyCharm</category><category>python</category><guid>http://brianbaquiran.com/posts/namedtuple-comes-in-handy/</guid><pubDate>Sun, 20 Dec 2015 00:58:42 GMT</pubDate></item><item><title>Tidy Aliens</title><link>http://brianbaquiran.com/posts/alien-employment-permit-dataset/</link><dc:creator>Brian Baquiran</dc:creator><description>&lt;div&gt;&lt;a class="reference external image-reference" href="http://brianbaquiran.com/images/aliens.png"&gt;&lt;img alt="/images/aliens.thumbnail.png" src="http://brianbaquiran.com/images/aliens.thumbnail.png"&gt;&lt;/a&gt;
&lt;p&gt;The &lt;a class="reference external" href="http://www.ble.dole.gov.ph/"&gt;Bureau of Local Employment&lt;/a&gt; issues working permits to foreign nationals that want to work in the Philippines. Ever wondered which nationalities obtain the most permits? I used public data from the BLE in a &lt;a class="reference external" href="http://brianbaquiran.com/stories/tidying-alien-work-permit-dataset/"&gt;data cleanup and visualization exercise&lt;/a&gt; using R’s reshape, dplyr and ggplot2.&lt;/p&gt;&lt;/div&gt;</description><category>dplyr</category><category>ggplot2</category><category>R Language</category><category>visualization</category><guid>http://brianbaquiran.com/posts/alien-employment-permit-dataset/</guid><pubDate>Sun, 29 Nov 2015 01:40:54 GMT</pubDate></item><item><title>The Art of Data Science</title><link>http://brianbaquiran.com/posts/the-art-of-data-science/</link><dc:creator>Brian Baquiran</dc:creator><description>&lt;div&gt;&lt;a class="reference external image-reference" href="http://brianbaquiran.com/images/art-of-data-science-book.png"&gt;&lt;img alt="/images/art-of-data-science-book.thumbnail.png" src="http://brianbaquiran.com/images/art-of-data-science-book.thumbnail.png"&gt;&lt;/a&gt;
&lt;p&gt;I will admit, I was pretty stoked yesterday when &lt;a class="reference external" href="http://www.biostat.jhsph.edu/~rpeng/"&gt;Roger Peng&lt;/a&gt; retweeted my announcement that his new book was available.&lt;/p&gt;
&lt;blockquote class="twitter-tweet" lang="en"&gt;&lt;p lang="en" dir="ltr"&gt;. &lt;a href="https://twitter.com/rdpeng"&gt;@rdpeng&lt;/a&gt;'s new book "The Art of Data Science" is now available on &lt;a href="https://twitter.com/leanpub"&gt;@leanpub&lt;/a&gt;. Get it at &lt;a href="https://t.co/nA606G715i"&gt;https://t.co/nA606G715i&lt;/a&gt; &lt;a href="https://twitter.com/hashtag/datascience?src=hash"&gt;#datascience&lt;/a&gt;&lt;/p&gt;— Brian Baquiran (@brianbaquiran) &lt;a href="https://twitter.com/brianbaquiran/status/669022777035243520"&gt;November 24, 2015&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src="//platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;&lt;p&gt;In the book, Peng and co-author Elizabeth Matsui walk us through the different activites of data analysis, from formulating questions, basic exploratory data analysis to get a rough feel for the data, to modelling the data with familiar distributions through to basic inference and prediction.&lt;/p&gt;
&lt;p&gt;Using R and the datasets that come bundled with it, Peng and Matsui demonstrate how each activity is actually an iterative process itself. At each stage, it's important to evaluate what you already know (or think you know) and revise your expectations based on the data.&lt;/p&gt;&lt;/div&gt;</description><category>books</category><category>datascience</category><guid>http://brianbaquiran.com/posts/the-art-of-data-science/</guid><pubDate>Wed, 25 Nov 2015 12:16:28 GMT</pubDate></item><item><title>Hello, World!</title><link>http://brianbaquiran.com/posts/hello-world/</link><dc:creator>Brian Baquiran</dc:creator><description>&lt;pre class="code c"&gt;&lt;a name="rest_code_61d8112fcc944b588fbc1744040b1596-1"&gt;&lt;/a&gt;&lt;span class="cm"&gt;/* Hello World program */&lt;/span&gt;
&lt;a name="rest_code_61d8112fcc944b588fbc1744040b1596-2"&gt;&lt;/a&gt;
&lt;a name="rest_code_61d8112fcc944b588fbc1744040b1596-3"&gt;&lt;/a&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;a name="rest_code_61d8112fcc944b588fbc1744040b1596-4"&gt;&lt;/a&gt;
&lt;a name="rest_code_61d8112fcc944b588fbc1744040b1596-5"&gt;&lt;/a&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_61d8112fcc944b588fbc1744040b1596-6"&gt;&lt;/a&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_61d8112fcc944b588fbc1744040b1596-7"&gt;&lt;/a&gt;    &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"Hello World"&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;a name="rest_code_61d8112fcc944b588fbc1744040b1596-8"&gt;&lt;/a&gt;
&lt;a name="rest_code_61d8112fcc944b588fbc1744040b1596-9"&gt;&lt;/a&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;</description><category>programming</category><guid>http://brianbaquiran.com/posts/hello-world/</guid><pubDate>Sun, 25 Oct 2015 05:02:45 GMT</pubDate></item></channel></rss>